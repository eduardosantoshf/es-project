"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[682],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),l=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=l(e.components);return i.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=l(n),d=a,h=p["".concat(c,".").concat(d)]||p[d]||m[d]||r;return n?i.createElement(h,o(o({ref:t},u),{},{components:n})):i.createElement(h,o({ref:t},u))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=p;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<r;l++)o[l]=n[l];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5465:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var i=n(7462),a=(n(7294),n(3905));const r={sidebar_position:1},o="Introduction",s={unversionedId:"documentation/intrusion-management-api/introduction",id:"documentation/intrusion-management-api/introduction",title:"Introduction",description:"This API will be used to act whenever an intrusion is detected. It will get the intrusion video clips from the cameras, activate the alarms, and trigger a new notification in the Notifications API.",source:"@site/docs/documentation/intrusion-management-api/introduction.md",sourceDirName:"documentation/intrusion-management-api",slug:"/documentation/intrusion-management-api/introduction",permalink:"/es-project/documentation/intrusion-management-api/introduction",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/documentation/intrusion-management-api/introduction.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Intrusion Managment API",permalink:"/es-project/category/intrusion-managment-api"},next:{title:"API Documentation",permalink:"/es-project/documentation/intrusion-management-api/api-documentation"}},c={},l=[{value:"Video-Clips",id:"video-clips",level:2},{value:"Alarms",id:"alarms",level:2},{value:"Notifications",id:"notifications",level:2}],u={toc:l};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"This API will be used to act whenever an intrusion is detected. It will get the intrusion video clips from the cameras, activate the alarms, and trigger a new notification in the Notifications API."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"To interact with the API in a local environment, you need to create a virtual enviroment and install the dependencies. To do so, execute the following commands in the root folder of the API:")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"python3 -m venv venv\nsource venv/bin/activate\npip install -r requirements.txt\n"))),(0,a.kt)("h2",{id:"video-clips"},"Video-Clips"),(0,a.kt)("p",null,"The communicaiton between the Intrusion Management API and the Cameras will be done through a message broker, when the API asks the Camera to send the video clips, and then the Camera will send the video clips through HTTP to the API. We choose this approach because, as all cameras are subcribed to the same topic, all receive the information, but only one will process it, and the rest will ignore it. It is simpler that have a API for the cameras."),(0,a.kt)("p",null,"After the video clips are received, it will be stored in a S3 bucket, this communication is made with the ",(0,a.kt)("strong",{parentName:"p"},"boto3")," library. The video clips will be stored in the S3 bucket with the following structure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"intrusion-client_id-camera_id-timestamp_intrusion.mp4\n")),(0,a.kt)("p",null,"Where:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"client_id: The id of the client that owns the camera."),(0,a.kt)("li",{parentName:"ul"},"camera_id: The id of the camera that detected the intrusion."),(0,a.kt)("li",{parentName:"ul"},"timestamp_intrusion: The timestamp when the intrusion was detected.")),(0,a.kt)("h2",{id:"alarms"},"Alarms"),(0,a.kt)("p",null,"When the Intrusion-Management API receives the information about a intrusion, it will activate the alarms. This communication will be done via message broker, and the alarms will change its status to ",(0,a.kt)("strong",{parentName:"p"},"active"),"."),(0,a.kt)("h2",{id:"notifications"},"Notifications"),(0,a.kt)("p",null,"When the Intrusion-Management API receives the information about a intrusion, it will trigger a new notification in the Notifications API."))}m.isMDXComponent=!0}}]);